# 2023-09-12

Note Taker: Chris Manson
Time Keeper: Peter Meehan

## Attendees

Add yourself to the list if you attend and check the box!

- [x] Ed Falkner (EF)
- [x] Chris Manson (CM)
- [ ] Aaron Chambers (AC)
- [x] Alex (A)
- [x] Preston Sego (PS)
- [x] Simon Ihmig (SI)
- [x] Katie Gengler (KG)
- [x] Peter Meehan (PM)
- [x] Andrey Mikhaylov (AM)
- [x] tommyJr (TJ)
- [x] Windvis
- [x] Ricardo Mendes
- [x] Lupestro

## Topics

### should we move the swc fork under the embroider org? <@22a>

- EF: yes

### Regarding content-tag emitting template position info: <@22a>

- Is the proposed `parseTemplates` metadata provided by patricklx/ember-template-tag the desired final format?
- Do we want Preprocessor.process to emit this info alongside the JS, or should this be a separate method that just parses and filters the swc ast down to the template nodes?

- EF: content-tag knows about `type: classMember` vs `type: expression`
- to get started we can just add this API as written
- I added the required data to content-tag/swc last week
- PM: should we add a new function for `parse`? 
- EF: probably. We could have returned metadata and the replaced version but things like lint will just throw away the replaced version


### Discuss Better defaults for publicEntrypoints and appReexports <@simonihmig>

- https://github.com/embroider-build/addon-blueprint/issues/193

- (large discussion)
- EF: this starts to get to RFC land because it's opinionated
- CM: what if we go with the 2nd version and the generator would add things as you need it
- EF: we need good comments in the thing that is generated by the blueprint - this is for teaching people what things are there for
- (discussion on the conclusion)
- EF: we can go with version 1 and add a comment that explains
- SI: should this match our package.json
- EF: yes
- it could be possible to derive addon.publicEntrypoints() from package.json
- PS: it's better to derive this than try to update package.json
- CM: should we deprecate addon.publicEntrypoints() with anything passed to it
- EF: maybe 

### pnpm resolution-mode issue in ember-try: fix, warning or error? <@lolmaus>

- https://github.com/ember-cli/ember-try/pull/966
- 8.7 or higher is fixed
- AM: we could merge this PR or we could add a warning or error
- a warning might be missed
- CM: I strongly think it should be an error
- EF: I'm ok with the error - as long as it's a really nice error
- L: should we still throw the error if you have resolution-mode set to highest (essentially fixing the issue)
- yes

### Embroider@3.2.x+ in-repo-addons performance drop <@achambers>

- discussed in the dev-embroider thread https://discord.com/channels/480462759797063690/1146428449154682991
- the package constructor is getting instantiated multiple times for the app
- it shouldn't be doing this
- there is probably some small mistake that is causing this to not create the cache properly
- AC: I'll try to create this in a separate app and we can continue a discussion in the thread
- 

### Move ember-cli to pnpm https://github.com/ember-cli/ember-cli/pull/10382 . Are we OK with CI being much slower or do we have ideas how to speed it up? <@mansona>

- (discussion)
- mostly ok with the approach
- it can't have such a slow down
- CM: are people ok with `--prefer-offline` if it speeds things up? 
- (general discussion)
- mostly ok
- EF: alternatively we could move this to scenario tester but that might be hard 
- CM: agreed
- this was needed because of embroider strict by default not working well with .embroider in node_modules 
- EF: alternatively we can configure where the `.embroider` folder goes
- CM: if I can't get this PR working well then that will be top of my list